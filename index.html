<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rclone Crypt Viewer</title>
    <!-- Custom Glassmorphism CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Core AES Block Cipher -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aes-js/3.1.2/index.min.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="icon-wrap">
                <svg viewBox="0 0 24 24">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
            </div>
            <h1>Rclone Viewer</h1>
        </div>

        <div class="sidebar-controls">
            <div class="input-group">
                <div class="input-header">
                    <label>Password</label>
                    <button class="btn-unobscure" id="btn-unobscure-pass">UNOBSCURE</button>
                </div>
                <input id="input-password" type="password" class="input-field" />
                <button class="toggle-visibility" id="btn-toggle-visibility">
                    <svg id="icon-visibility" viewBox="0 0 24 24">
                        <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
            </div>

            <div class="input-group">
                <div class="input-header">
                    <label>Salt (Optional)</label>
                    <button class="btn-unobscure" id="btn-unobscure-salt">UNOBSCURE</button>
                </div>
                <input id="input-salt" type="password" placeholder="Default salt used if empty" class="input-field" />
            </div>

            <div class="input-group">
                <div class="input-header"><label>Filename Encoding</label></div>
                <select id="input-encoding" class="input-field select-field">
                    <option value="auto">Auto-Detect (Base36 / Base32)</option>
                    <option value="base36">Base36 (Rclone newer)</option>
                    <option value="base32">Standard (Base32)</option>
                    <option value="base64">Base64</option>
                    <option value="off">Off / Obfuscated</option>
                </select>
            </div>
        </div>

        <div class="sidebar-files">
            <div class="files-header">
                Local Files
                <span id="key-status" class="key-status animate-pulse hidden">Generating Keys...</span>
            </div>
            <div id="file-list" class="file-list">
                <div class="empty-files">
                    Upload a file to begin. Open F12 Console to see debug logs.
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-area">
        <div class="topbar">
            <h2 id="preview-title" class="topbar-title truncate">Preview Canvas</h2>
            <div class="upload-actions">
                <label class="btn btn-secondary">
                    <svg viewBox="0 0 24 24">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg> Files
                    <input id="upload-files" type="file" multiple class="hidden" />
                </label>
                <label class="btn btn-primary">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z">
                        </path>
                    </svg> Folder
                    <input id="upload-folder" type="file" webkitdirectory="true" multiple class="hidden" />
                </label>
            </div>
        </div>

        <div id="preview-container" class="preview-container">
            <div class="idle-state animate-pulse">
                <svg viewBox="0 0 24 24">
                    <path d="m12 14 4-4"></path>
                    <path
                        d="M3.3 7 8.7 1.6a2.4 2.4 0 0 1 3.4 0l5.4 5.4a2.4 2.4 0 0 1 0 3.4L12.1 15.8a2.4 2.4 0 0 1-3.4 0L3.3 10.4a2.4 2.4 0 0 1 0-3.4z">
                    </path>
                </svg>
                <p>Select an encrypted file to view</p>
            </div>
        </div>
    </div>

    <!-- Application Logic -->
    <script src="app.js"></script>
</body>

</html>